=== EU LEDGER ATOMIC SIM ===
Scenario 1 — Baseline default policy (atomicUnit = 1)
Snapshot: OK — all EU values are atomic under default policy
assertLedgerEuSnapshotAtomic:
  OK

=== EU LEDGER ATOMIC SIM ===
Scenario 2 — Negative + capped total supply
scope=CERT, kind=NEGATIVE, message=Atomic amount must not be negative, value=-1, atomicUnit=1, maxSupply=100
scope=TOTAL, kind=OVER_MAX_SUPPLY, message=Amount exceeds the configured maxSupply, value=150, atomicUnit=1, maxSupply=100
assertLedgerEuSnapshotAtomic (expected to throw):
  threw -> Error: [LedgerEuAtomicInvariantError] One or more EU atomic invariants were violated:
  - scope=CERT(EU-NEG), kind=NEGATIVE, message=Atomic amount must not be negative, value=-1, atomicUnit=1, maxSupply=100
  - scope=TOTAL, kind=OVER_MAX_SUPPLY, message=Amount exceeds the configured maxSupply, value=150, atomicUnit=1, maxSupply=100
    at assertLedgerEuSnapshotAtomic (/home/james/the-thesis-chain/src/ledger/atomic-eu-ledger-enforce.ts:155:9)
    at scenarioNegativeAndCap (/home/james/the-thesis-chain/src/sims/atomic-eu-ledger-enforce-sim.ts:90:33)
    at main (/home/james/the-thesis-chain/src/sims/atomic-eu-ledger-enforce-sim.ts:136:3)
    at Object.<anonymous> (/home/james/the-thesis-chain/src/sims/atomic-eu-ledger-enforce-sim.ts:144:3)
    at Module._compile (node:internal/modules/cjs/loader:1760:14)
    at Module.m._compile (/home/james/the-thesis-chain/node_modules/ts-node/src/index.ts:1618:23)
    at node:internal/modules/cjs/loader:1893:10
    at Object.require.extensions.<computed> [as .ts] (/home/james/the-thesis-chain/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)

=== EU LEDGER ATOMIC SIM ===
Scenario 3 — Coarser atomicUnit (100n)
scope=CERT, kind=NON_ATOMIC, message=Amount is not an exact multiple of the atomic unit, value=150, atomicUnit=100, maxSupply=1000
scope=TOTAL, kind=NON_ATOMIC, message=Amount is not an exact multiple of the atomic unit, value=450, atomicUnit=100, maxSupply=1000
assertLedgerEuSnapshotAtomic (expected to throw):
  threw -> Error: [LedgerEuAtomicInvariantError] One or more EU atomic invariants were violated:
  - scope=CERT(EU-COARSE-BAD-150), kind=NON_ATOMIC, message=Amount is not an exact multiple of the atomic unit, value=150, atomicUnit=100, maxSupply=1000
  - scope=TOTAL, kind=NON_ATOMIC, message=Amount is not an exact multiple of the atomic unit, value=450, atomicUnit=100, maxSupply=1000
    at assertLedgerEuSnapshotAtomic (/home/james/the-thesis-chain/src/ledger/atomic-eu-ledger-enforce.ts:155:9)
    at scenarioCoarserAtomicUnit (/home/james/the-thesis-chain/src/sims/atomic-eu-ledger-enforce-sim.ts:126:33)
    at main (/home/james/the-thesis-chain/src/sims/atomic-eu-ledger-enforce-sim.ts:138:3)
    at Object.<anonymous> (/home/james/the-thesis-chain/src/sims/atomic-eu-ledger-enforce-sim.ts:144:3)
    at Module._compile (node:internal/modules/cjs/loader:1760:14)
    at Module.m._compile (/home/james/the-thesis-chain/node_modules/ts-node/src/index.ts:1618:23)
    at node:internal/modules/cjs/loader:1893:10
    at Object.require.extensions.<computed> [as .ts] (/home/james/the-thesis-chain/node_modules/ts-node/src/index.ts:1621:12)
    at Module.load (node:internal/modules/cjs/loader:1480:32)
    at Module._load (node:internal/modules/cjs/loader:1299:12)
